console.log("\uD83C\uDF7F️ DualSubs: \uD83D\uDD23 Universal"),console.log("Manifest.response.bundle"),console.log("version: undefined"),(()=>{"use strict";var e={803:function(e){let a=function(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":"undefined"!=typeof Egern?"Egern":void 0}();class t{static name="Lodash";static version="1.2.2";static about(){return console.log(`
🟧 ${this.name} v${this.version}
`)}static get(e={},a="",t){!Array.isArray(a)&&(a=this.toPath(a));let s=a.reduce((e,a)=>Object(e)[a],e);return void 0===s?t:s}static set(e={},a="",t){return!Array.isArray(a)&&(a=this.toPath(a)),a.slice(0,-1).reduce((e,t,s)=>Object(e[t])===e[t]?e[t]:e[t]=/^\d+$/.test(a[s+1])?[]:{},e)[a[a.length-1]]=t,e}static unset(e={},a=""){return!Array.isArray(a)&&(a=this.toPath(a)),a.reduce((e,t,s)=>s===a.length-1?(delete e[t],!0):Object(e)[t],e)}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static escape(e){let a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>a[e])}static unescape(e){let a={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>a[e])}}class s{static name="Storage";static version="1.1.0";static about(){return l("",`🟧 ${this.name} v${this.version}`,"")}static data=null;static dataFile="box.dat";static #e=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e=new String,s=null){let n=s;if(!0===e.startsWith("@")){let{key:a,path:s}=e.match(this.#e)?.groups;e=a;let l=this.getItem(e,{});"object"!=typeof l&&(l={}),n=t.get(l,s);try{n=JSON.parse(n)}catch(e){}}else{switch(a){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":n=$persistentStore.read(e);break;case"Quantumult X":n=$prefs.valueForKey(e);break;case"Node.js":this.data=this.#a(this.dataFile),n=this.data?.[e];break;default:n=this.data?.[e]||null}try{n=JSON.parse(n)}catch(e){}}return n??s}static setItem(e=new String,s=new String){let n=!1;if("object"==typeof s)s=JSON.stringify(s);else s=String(s);if(!0===e.startsWith("@")){let{key:a,path:l}=e.match(this.#e)?.groups;e=a;let g=this.getItem(e,{});"object"!=typeof g&&(g={}),t.set(g,l,s),n=this.setItem(e,g)}else switch(a){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":n=$persistentStore.write(s,e);break;case"Quantumult X":n=$prefs.setValueForKey(s,e);break;case"Node.js":this.data=this.#a(this.dataFile),this.data[e]=s,this.#t(this.dataFile),n=!0;break;default:n=this.data?.[e]||null}return n}static removeItem(e){let s=!1;if(!0===e.startsWith("@")){let{key:a,path:n}=e.match(this.#e)?.groups;e=a;let l=this.getItem(e);"object"!=typeof l&&(l={}),keyValue=t.unset(l,n),s=this.setItem(e,l)}else switch(a){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":s=!1;break;case"Quantumult X":s=$prefs.removeValueForKey(e);break;default:s=!1}return s}static clear(){let e=!1;switch(a){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":e=!1;break;case"Quantumult X":e=$prefs.removeAllValues();break;default:e=!1}return e}static #a(e){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let a=this.path.resolve(e),t=this.path.resolve(process.cwd(),e),s=this.fs.existsSync(a),n=!s&&this.fs.existsSync(t);if(!s&&!n)return{};try{return JSON.parse(this.fs.readFileSync(s?a:t))}catch(e){return{}}}}static #t(e=this.dataFile){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let a=this.path.resolve(e),t=this.path.resolve(process.cwd(),e),s=this.fs.existsSync(a),n=!s&&this.fs.existsSync(t),l=JSON.stringify(this.data);s?this.fs.writeFileSync(a,l):n?this.fs.writeFileSync(t,l):this.fs.writeFileSync(a,l)}}}async function n(e={},s={}){switch(e.constructor){case Object:e={...s,...e};break;case String:e={...s,url:e}}!e.method&&(e.method="GET",(e.body??e.bodyBytes)&&(e.method="POST")),delete e.headers?.Host,delete e.headers?.[":authority"],delete e.headers?.["Content-Length"],delete e.headers?.["content-length"];let l=e.method.toLocaleLowerCase();switch(a){case"Loon":case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:if(e.timeout)switch(e.timeout=parseInt(e.timeout,10),a){case"Loon":case"Shadowrocket":case"Stash":case"Egern":default:e.timeout=e.timeout/1e3;case"Surge":}if(e.policy)switch(a){case"Loon":e.node=e.policy;break;case"Stash":t.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy));break;case"Shadowrocket":t.set(e,"headers.X-Surge-Proxy",e.policy)}return"boolean"==typeof e.redirection&&(e["auto-redirect"]=e.redirection),e.bodyBytes&&!e.body&&(e.body=e.bodyBytes,delete e.bodyBytes),await new Promise((a,t)=>{$httpClient[l](e,(s,n,l)=>{s?t(s):(n.ok=/^2\d\d$/.test(n.status),n.statusCode=n.status,l&&(n.body=l,!0==e["binary-mode"]&&(n.bodyBytes=l)),a(n))})});case"Quantumult X":return e.policy&&t.set(e,"opts.policy",e.policy),"boolean"==typeof e["auto-redirect"]&&t.set(e,"opts.redirection",e["auto-redirect"]),e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,delete e.body):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),delete object.body):e.body&&delete e.bodyBytes,await $task.fetch(e).then(e=>(e.ok=/^2\d\d$/.test(e.statusCode),e.status=e.statusCode,e),e=>Promise.reject(e.error));case"Node.js":let g=require("iconv-lite");!function(e){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar))}(e);let{url:i,...u}=e;return await this.got[l](i,u).on("redirect",(e,a)=>{try{if(e.headers["set-cookie"]){let t=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();t&&this.ckjar.setCookieSync(t,null),a.cookieJar=this.ckjar}}catch(e){this.logErr(e)}}).then(e=>(e.statusCode=e.status,e.body=g.decode(e.rawBody,"utf-8"),e.bodyBytes=e.rawBody,e),e=>Promise.reject(e.message))}}let l=(...e)=>console.log(e.join("\n"));class g{static name="EXTM3U";static version="0.8.8";static about=()=>console.log(`
🟧 ${this.name} v${this.version}
`);static #s=/^(?:(?<TAG>#(?:EXT|AIV)[^#:\s\r\n]+)(?::(?<OPTION>[^\r\n]+))?(?:(?:\r\n|\r|\n)(?<URI>[^#\s\r\n]+))?|(?<NOTE>#[^\r\n]+)?)(?:\r\n|\r|\n)?$/gm;static #n=/^((-?\d+[x.\d]+)|[0-9A-Z-]+)$/;static parse(e=new String){return[...e.matchAll(this.#s)].map(e=>(e=e?.groups||e,/=/.test(e?.OPTION)&&(e.OPTION=Object.fromEntries(`${e.OPTION},`.split(/,\s*(?![^"]*",)/).slice(0,-1).map(e=>((e=e.split(/=(.*)/))[1]=isNaN(e[1])?e[1].replace(/^"(.*)"$/,"$1"):parseFloat(e[1]),e)))),e))}static stringify(e=[],a={lineBreak:"\n"}){return e?.[0]?.TAG!=="#EXTM3U"&&e.unshift({TAG:"#EXTM3U"}),e.map(e=>("object"==typeof e?.OPTION&&(e.OPTION=Object.entries(e.OPTION).map(a=>(e?.TAG==="#EXT-X-SESSION-DATA"?a[1]=`"${a[1]}"`:isNaN(a[1])?"ID"===a[0]||"INSTREAM-ID"===a[0]||"KEYFORMAT"===a[0]?a[1]=`"${a[1]}"`:!this.#n.test(a[1])&&(a[1]=`"${a[1]}"`):a[1]="number"==typeof a[1]?a[1]:`"${a[1]}"`,a.join("="))).join(",")),e=e?.URI?e.TAG+":"+e.OPTION+a.lineBreak+e.URI:e?.OPTION?e.TAG+":"+e.OPTION:e?.TAG?e.TAG:e?.NOTE?e.NOTE:"")).join(a.lineBreak)}}function i(e={},a={},t="",s="",n=!0,g="iPhone"){l(`☑️ Set DualSubs Subtitle Option, type: ${t}`,"");let u=e?.OPTION?.NAME.trim(),o=a?.OPTION?.NAME.trim(),r=e?.OPTION?.LANGUAGE.trim(),m=a?.OPTION?.LANGUAGE.trim(),d=JSON.parse(JSON.stringify(e));switch(t){case"Official":d.OPTION.NAME=`官方字幕 (${u}/${o})`;break;case"Translate":d.OPTION.NAME=`翻译字幕 (${u}/${o})`;break;case"External":d.OPTION.NAME=`外挂字幕 (${u})`}switch(s){case"Apple":case"MGM+":switch(g){case"Web":case"Macintosh":d.OPTION.LANGUAGE=r;break;default:d.OPTION.LANGUAGE=`${t} (${r}/${m})`}break;case"Disney+":case"PrimeVideo":case"Hulu":case"Nebula":case"PlutoTV":case"Paramount+":case"Discovery+Ph":d.OPTION.LANGUAGE=`${t} (${r}/${m})`;break;case"Max":case"HBOMax":case"Viki":d.OPTION.LANGUAGE=r;break;case"MUBI":d.OPTION.LANGUAGE=`${t} (${r}/${m})`,!n&&(d.OPTION.NAME=u);break;default:d.OPTION.LANGUAGE=r}d.OPTION["ASSOC-LANGUAGE"]=m;let c=d.OPTION.URI.includes("?")?"&":"?";return d.OPTION.URI+=`${c}subtype=${t}`,d.OPTION.AUTOSELECT="YES",!n&&(d.OPTION.DEFAULT="YES"),l(`✅ Set DualSubs Subtitle Option, newOption: ${JSON.stringify(d)}`,""),d}function u(e="",a=""){return/^https?:\/\//i.test(a)?a:e.match(/^(https?:\/\/(?:[^?]+)\/)/i)?.[0]+a}class o{constructor(e="application/x-mpegURL",a="Universal"){this.Name="AttrList",this.Version="1.0.6",this.format=e,this.platform=a,l(`
🟧 ${this.Name} v${this.Version} format: ${this.format} platform: ${this.platform}
`)}get(e="",a=[],t="",s=[]){l(`☑️ Get Attribute List, type: ${t}, langCodes: ${s}`);let n=[];switch(this.format){case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":{let g=a.filter(e=>e?.TAG==="#EXT-X-MEDIA").filter(e=>e?.OPTION?.TYPE===t).filter(e=>e?.OPTION?.FORCED!=="YES");for(let e of s)if(l(`🚧 Get Attribute List, for (let ${e} of langcodes)`,""),0!==(n=g.filter(a=>a?.OPTION?.LANGUAGE?.toLowerCase()===e?.toLowerCase())).length)break;n=n.map(a=>(a.URL=u(e,a?.OPTION?.URI??null),a));break}case"text/json":case"application/json":if("PrimeVideo"===this.platform){let e=a?.[t]??[];for(let a of s)if(l(`🚧 Get Attribute List, for (let ${a} of langcodes)`,""),0!==(n=e.filter(e=>e?.languageCode?.toLowerCase()===a?.toLowerCase())).length)break;n=n.map(e=>(e.URL=e.url,e))}}return l(`✅ Get Attribute List, matchList: ${JSON.stringify(n)}`,""),n}set(e=[],a={},t=[],s=[],n=!0,g="iPhone"){t=!0==n?t:[t.at(-1)];let u=a?.[s?.[0]],o=a?.[s?.[1]];switch(l(`☑️ Set Attribute List, types: ${t}`,""),this.format){case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":u?.forEach(a=>{let u=e.findIndex(e=>e?.OPTION?.URI===a.OPTION.URI);t.forEach(t=>{let r;switch(l(`🚧 Set Attribute List, type: ${t}`,""),t){case"Official":o?.forEach(e=>{a?.OPTION?.["GROUP-ID"]===e?.OPTION?.["GROUP-ID"]&&("Apple"===this.platform?a?.OPTION.CHARACTERISTICS==e?.OPTION.CHARACTERISTICS&&(r=i(a,e,t,this.platform,n,g)):r=i(a,e,t,this.platform,n,g))});break;case"Translate":case"External":r=i(a,{OPTION:{TYPE:"SUBTITLES",NAME:o?.[0]?.OPTION?.NAME??s[1].toLowerCase(),LANGUAGE:o?.[0]?.OPTION?.LANGUAGE??s[1].toLowerCase()}},t,this.platform,n,g),r.OPTION.URI+=`&lang=${a?.OPTION?.LANGUAGE?.toUpperCase()}`}r&&e.splice(u+(n?1:0),0,r)})});break;case"text/json":case"application/json":if("PrimeVideo"===this.platform)u?.forEach(a=>{let g=e.findIndex(e=>e?.timedTextTrackId===a.timedTextTrackId);t.forEach(t=>{let i;switch(l(`🚧 Set Attribute List, type: ${t}`),t){case"Official":o?.forEach(e=>{if(a.trackGroupId===e.trackGroupId){(i=JSON.parse(JSON.stringify(a))).displayName=`${t} (${a.displayName}/${e.displayName})`,i.languageCode=`${a.languageCode}/${e.languageCode}_${t}`,i.timedTextTrackId=`${a.timedTextTrackId}_${t}`;let n=i.url.includes("?")?"&":"?";i.url+=`${n}subtype=${t}`,i.url+=`&lang=${s[0]}`}});break;case"Translate":case"External":(i=JSON.parse(JSON.stringify(a))).displayName=`${t} (${a.displayName}/${s[1]})`,i.languageCode=`${a.languageCode}/${s[1].toLowerCase()}_${t}`,i.timedTextTrackId=`${a.timedTextTrackId}_${t}`;let u=a.url.includes("?")?"&":"?";i.url+=`${u}subtype=${t}`,i.url+=`&lang=${a.languageCode.toUpperCase()}`}i&&e.splice(g+(n?1:0),0,i)})})}return l(`✅ Set Attribute List`),e}}let r={Default:JSON.parse('{"Settings":{"Switch":true,"Type":"Translate","Types":["Official","Translate"],"Languages":["EN","ZH"],"CacheSize":50},"Configs":{"breakLine":{"text/xml":"&#x000A;","application/xml":"&#x000A;","text/vtt":"\\n","application/vtt":"\\n","text/json":"\\n","application/json":"\\n"}}}'),Universal:JSON.parse('{"Settings":{"Switch":true,"Types":["Official","Translate"],"Languages":["AUTO","ZH"]},"Configs":{"Languages":{"AUTO":["en","en-US","eng","en-GB","en-UK","en-CA","en-US SDH","ja","ja-JP","jpn","ko","ko-KR","kor","pt","pt-PT","pt-BR","por"],"AR":["ar","ar-001"],"BG":["bg","bg-BG","bul"],"CS":["cs","cs-CZ","ces"],"DA":["da","da-DK","dan"],"DE":["de","de-DE","deu"],"EL":["el","el-GR","ell"],"EN":["en","en-US","eng","en-GB","en-UK","en-CA","en-US SDH"],"EN-CA":["en-CA","en","eng"],"EN-GB":["en-UK","en","eng"],"EN-US":["en-US","en","eng"],"EN-US SDH":["en-US SDH","en-US","en","eng"],"ES":["es","es-419","es-ES","spa","es-419 SDH"],"ES-419":["es-419","es","spa"],"ES-419 SDH":["es-419 SDH","es-419","es","spa"],"ES-ES":["es-ES","es","spa"],"ET":["et","et-EE","est"],"FI":["fi","fi-FI","fin"],"FR":["fr","fr-CA","fr-FR","fra"],"FR-CA":["fr-CA","fr","fra"],"FR-DR":["fr-FR","fr","fra"],"HU":["hu","hu-HU","hun"],"ID":["id","id-id"],"IT":["it","it-IT","ita"],"JA":["ja","ja-JP","jpn"],"KO":["ko","ko-KR","kor"],"LT":["lt","lt-LT","lit"],"LV":["lv","lv-LV","lav"],"NL":["nl","nl-NL","nld"],"NO":["no","nb-NO","nor"],"PL":["pl","pl-PL"],"PT":["pt","pt-PT","pt-BR","por"],"PT-PT":["pt-PT","pt","por"],"PT-BR":["pt-BR","pt","por"],"RO":["ro","ro-RO","ron"],"RU":["ru","ru-RU","rus"],"SK":["sk","sk-SK","slk"],"SL":["sl","sl-SI","slv"],"SV":["sv","sv-SE","swe"],"IS":["is","is-IS","isl"],"ZH":["zh","cmn","zho","zh-CN","zh-Hans","cmn-Hans","zh-TW","zh-Hant","cmn-Hant","zh-HK","yue-Hant","yue"],"ZH-CN":["zh-CN","zh-Hans","cmn-Hans","zho"],"ZH-HANS":["zh-Hans","cmn-Hans","zh-CN","zho"],"ZH-HK":["zh-HK","yue-Hant","yue","zho"],"ZH-TW":["zh-TW","zh-Hant","cmn-Hant","zho"],"ZH-HANT":["zh-Hant","cmn-Hant","zh-TW","zho"],"YUE":["yue","yue-Hant","zh-HK","zho"],"YUE-HK":["yue-Hant","yue","zh-HK","zho"]}}}'),YouTube:JSON.parse('{"Settings":{"Switch":true,"Type":"Official","Types":["Translate","External"],"Languages":["AUTO","ZH"],"AutoCC":true,"ShowOnly":false},"Configs":{"Languages":{"BG":"bg-BG","CS":"cs","DA":"da-DK","DE":"de","EL":"el","EN":"en","EN-GB":"en-GB","EN-US":"en-US","EN-US SDH":"en-US SDH","ES":"es","ES-419":"es-419","ES-ES":"es-ES","ET":"et-EE","FI":"fi","FR":"fr","HU":"hu-HU","ID":"id","IS":"is-IS","IT":"it","JA":"ja","KO":"ko","LT":"lt-LT","LV":"lv-LV","NL":"nl-NL","NO":"nb-NO","PL":"pl-PL","PT":"pt","PT-PT":"pt-PT","PT-BR":"pt-BR","RO":"ro-RO","RU":"ru-RU","SK":"sk-SK","SL":"sl-SI","SV":"sv-SE","YUE":"yue","YUE-HK":"yue-HK","ZH":"zh","ZH-HANS":"zh-Hans","ZH-HK":"zh-Hant-HK","ZH-HANT":"zh-Hant","ZH-TW":"zh-TW"},"translationLanguages":{"DESKTOP":[{"languageCode":"sq","languageName":{"simpleText":"Shqip - 阿尔巴尼亚语"}},{"languageCode":"ak","languageName":{"simpleText":"\xc1k\xe1n - 阿肯语"}},{"languageCode":"ar","languageName":{"simpleText":"العربية - 阿拉伯语"}},{"languageCode":"am","languageName":{"simpleText":"አማርኛ - 阿姆哈拉语"}},{"languageCode":"as","languageName":{"simpleText":"অসমীয়া - 阿萨姆语"}},{"languageCode":"az","languageName":{"simpleText":"آذربايجان ديلی - 阿塞拜疆语"}},{"languageCode":"ee","languageName":{"simpleText":"\xc8ʋegbe - 埃维语"}},{"languageCode":"ay","languageName":{"simpleText":"Aymar aru - 艾马拉语"}},{"languageCode":"ga","languageName":{"simpleText":"Gaeilge - 爱尔兰语"}},{"languageCode":"et","languageName":{"simpleText":"Eesti - 爱沙尼亚语"}},{"languageCode":"or","languageName":{"simpleText":"ଓଡ଼ିଆ - 奥里亚语"}},{"languageCode":"om","languageName":{"simpleText":"Afaan Oromoo - 奥罗莫语"}},{"languageCode":"eu","languageName":{"simpleText":"Euskara - 巴斯克语"}},{"languageCode":"be","languageName":{"simpleText":"Беларуская - 白俄罗斯语"}},{"languageCode":"bg","languageName":{"simpleText":"Български - 保加利亚语"}},{"languageCode":"nso","languageName":{"simpleText":"Sesotho sa Leboa - 北索托语"}},{"languageCode":"is","languageName":{"simpleText":"\xcdslenska - 冰岛语"}},{"languageCode":"pl","languageName":{"simpleText":"Polski - 波兰语"}},{"languageCode":"bs","languageName":{"simpleText":"Bosanski - 波斯尼亚语"}},{"languageCode":"fa","languageName":{"simpleText":"فارسی - 波斯语"}},{"languageCode":"bho","languageName":{"simpleText":"भोजपुरी - 博杰普尔语"}},{"languageCode":"ts","languageName":{"simpleText":"Xitsonga - 聪加语"}},{"languageCode":"tt","languageName":{"simpleText":"Татарча - 鞑靼语"}},{"languageCode":"da","languageName":{"simpleText":"Dansk - 丹麦语"}},{"languageCode":"de","languageName":{"simpleText":"Deutsch - 德语"}},{"languageCode":"dv","languageName":{"simpleText":"ދިވެހިބަސް - 迪维希语"}},{"languageCode":"ru","languageName":{"simpleText":"Русский - 俄语"}},{"languageCode":"fr","languageName":{"simpleText":"fran\xe7ais - 法语"}},{"languageCode":"sa","languageName":{"simpleText":"संस्कृतम् - 梵语"}},{"languageCode":"fil","languageName":{"simpleText":"Filipino - 菲律宾语"}},{"languageCode":"fi","languageName":{"simpleText":"suomi - 芬兰语"}},{"languageCode":"km","languageName":{"simpleText":"ភាសាខ្មែរ - 高棉语"}},{"languageCode":"ka","languageName":{"simpleText":"ქართული - 格鲁吉亚语"}},{"languageCode":"gu","languageName":{"simpleText":"ગુજરાતી - 古吉拉特语"}},{"languageCode":"gn","languageName":{"simpleText":"Ava\xf1e\'ẽ - 瓜拉尼语"}},{"languageCode":"kk","languageName":{"simpleText":"Қазақ тілі - 哈萨克语"}},{"languageCode":"ht","languageName":{"simpleText":"Krey\xf2l ayisyen - 海地克里奥尔语"}},{"languageCode":"ko","languageName":{"simpleText":"한국어 - 韩语"}},{"languageCode":"ha","languageName":{"simpleText":"هَوُسَ - 豪萨语"}},{"languageCode":"nl","languageName":{"simpleText":"Nederlands - 荷兰语"}},{"languageCode":"gl","languageName":{"simpleText":"Galego - 加利西亚语"}},{"languageCode":"ca","languageName":{"simpleText":"catal\xe0 - 加泰罗尼亚语"}},{"languageCode":"cs","languageName":{"simpleText":"čeština - 捷克语"}},{"languageCode":"kn","languageName":{"simpleText":"ಕನ್ನಡ - 卡纳达语"}},{"languageCode":"ky","languageName":{"simpleText":"кыргыз тили - 吉尔吉斯语"}},{"languageCode":"xh","languageName":{"simpleText":"isiXhosa - 科萨语"}},{"languageCode":"co","languageName":{"simpleText":"corsu - 科西嘉语"}},{"languageCode":"hr","languageName":{"simpleText":"hrvatski - 克罗地亚语"}},{"languageCode":"qu","languageName":{"simpleText":"Runa Simi - 克丘亚语"}},{"languageCode":"ku","languageName":{"simpleText":"Kurd\xee - 库尔德语"}},{"languageCode":"la","languageName":{"simpleText":"lingua latīna - 拉丁语"}},{"languageCode":"lv","languageName":{"simpleText":"latviešu valoda - 拉脱维亚语"}},{"languageCode":"lo","languageName":{"simpleText":"ພາສາລາວ - 老挝语"}},{"languageCode":"lt","languageName":{"simpleText":"lietuvių kalba - 立陶宛语"}},{"languageCode":"ln","languageName":{"simpleText":"ling\xe1la - 林加拉语"}},{"languageCode":"lg","languageName":{"simpleText":"Luganda - 卢干达语"}},{"languageCode":"lb","languageName":{"simpleText":"L\xebtzebuergesch - 卢森堡语"}},{"languageCode":"rw","languageName":{"simpleText":"Kinyarwanda - 卢旺达语"}},{"languageCode":"ro","languageName":{"simpleText":"Rom\xe2nă - 罗马尼亚语"}},{"languageCode":"mt","languageName":{"simpleText":"Malti - 马耳他语"}},{"languageCode":"mr","languageName":{"simpleText":"मराठी - 马拉地语"}},{"languageCode":"mg","languageName":{"simpleText":"Malagasy - 马拉加斯语"}},{"languageCode":"ml","languageName":{"simpleText":"മലയാളം - 马拉雅拉姆语"}},{"languageCode":"ms","languageName":{"simpleText":"bahasa Melayu - 马来语"}},{"languageCode":"mk","languageName":{"simpleText":"македонски јазик - 马其顿语"}},{"languageCode":"mi","languageName":{"simpleText":"te reo Māori - 毛利语"}},{"languageCode":"mn","languageName":{"simpleText":"Монгол хэл - 蒙古语"}},{"languageCode":"bn","languageName":{"simpleText":"বাংলা - 孟加拉语"}},{"languageCode":"my","languageName":{"simpleText":"ဗမာစာ - 缅甸语"}},{"languageCode":"hmn","languageName":{"simpleText":"Hmoob - 苗语"}},{"languageCode":"af","languageName":{"simpleText":"Afrikaans - 南非荷兰语"}},{"languageCode":"st","languageName":{"simpleText":"Sesotho - 南索托语"}},{"languageCode":"ne","languageName":{"simpleText":"नेपाली - 尼泊尔语"}},{"languageCode":"no","languageName":{"simpleText":"Norsk - 挪威语"}},{"languageCode":"pa","languageName":{"simpleText":"ਪੰਜਾਬੀ - 旁遮普语"}},{"languageCode":"pt","languageName":{"simpleText":"Portugu\xeas - 葡萄牙语"}},{"languageCode":"ps","languageName":{"simpleText":"پښتو - 普什图语"}},{"languageCode":"ny","languageName":{"simpleText":"chiCheŵa - 齐切瓦语"}},{"languageCode":"ja","languageName":{"simpleText":"日本語 - 日语"}},{"languageCode":"sv","languageName":{"simpleText":"Svenska - 瑞典语"}},{"languageCode":"sm","languageName":{"simpleText":"Gagana fa\'a Samoa - 萨摩亚语"}},{"languageCode":"sr","languageName":{"simpleText":"Српски језик - 塞尔维亚语"}},{"languageCode":"si","languageName":{"simpleText":"සිංහල - 僧伽罗语"}},{"languageCode":"sn","languageName":{"simpleText":"ChiShona - 绍纳语"}},{"languageCode":"eo","languageName":{"simpleText":"Esperanto - 世界语"}},{"languageCode":"sk","languageName":{"simpleText":"slovenčina - 斯洛伐克语"}},{"languageCode":"sl","languageName":{"simpleText":"slovenščina - 斯洛文尼亚语"}},{"languageCode":"sw","languageName":{"simpleText":"Kiswahili - 斯瓦希里语"}},{"languageCode":"gd","languageName":{"simpleText":"G\xe0idhlig - 苏格兰盖尔语"}},{"languageCode":"ceb","languageName":{"simpleText":"Binisaya - 宿务语"}},{"languageCode":"so","languageName":{"simpleText":"Soomaaliga - 索马里语"}},{"languageCode":"tg","languageName":{"simpleText":"тоҷикӣ - 塔吉克语"}},{"languageCode":"te","languageName":{"simpleText":"తెలుగు - 泰卢固语"}},{"languageCode":"ta","languageName":{"simpleText":"தமிழ் - 泰米尔语"}},{"languageCode":"th","languageName":{"simpleText":"ไทย - 泰语"}},{"languageCode":"ti","languageName":{"simpleText":"ትግርኛ - 提格利尼亚语"}},{"languageCode":"tr","languageName":{"simpleText":"T\xfcrk\xe7e - 土耳其语"}},{"languageCode":"tk","languageName":{"simpleText":"T\xfcrkmen - 土库曼语"}},{"languageCode":"cy","languageName":{"simpleText":"Cymraeg - 威尔士语"}},{"languageCode":"ug","languageName":{"simpleText":"ئۇيغۇرچە - 维吾尔语"}},{"languageCode":"und","languageName":{"simpleText":"Unknown - 未知语言"}},{"languageCode":"ur","languageName":{"simpleText":"اردو - 乌尔都语"}},{"languageCode":"uk","languageName":{"simpleText":"українська - 乌克兰语"}},{"languageCode":"uz","languageName":{"simpleText":"O\'zbek - 乌兹别克语"}},{"languageCode":"es","languageName":{"simpleText":"Espa\xf1ol - 西班牙语"}},{"languageCode":"fy","languageName":{"simpleText":"Frysk - 西弗里西亚语"}},{"languageCode":"iw","languageName":{"simpleText":"עברית - 希伯来语"}},{"languageCode":"el","languageName":{"simpleText":"Ελληνικά - 希腊语"}},{"languageCode":"haw","languageName":{"simpleText":"ʻŌlelo Hawaiʻi - 夏威夷语"}},{"languageCode":"sd","languageName":{"simpleText":"سنڌي - 信德语"}},{"languageCode":"hu","languageName":{"simpleText":"magyar - 匈牙利语"}},{"languageCode":"su","languageName":{"simpleText":"Basa Sunda - 巽他语"}},{"languageCode":"hy","languageName":{"simpleText":"հայերեն - 亚美尼亚语"}},{"languageCode":"ig","languageName":{"simpleText":"Igbo - 伊博语"}},{"languageCode":"it","languageName":{"simpleText":"Italiano - 意大利语"}},{"languageCode":"yi","languageName":{"simpleText":"ייִדיש - 意第绪语"}},{"languageCode":"hi","languageName":{"simpleText":"हिन्दी - 印地语"}},{"languageCode":"id","languageName":{"simpleText":"Bahasa Indonesia - 印度尼西亚语"}},{"languageCode":"en","languageName":{"simpleText":"English - 英语"}},{"languageCode":"yo","languageName":{"simpleText":"Yor\xf9b\xe1 - 约鲁巴语"}},{"languageCode":"vi","languageName":{"simpleText":"Tiếng Việt - 越南语"}},{"languageCode":"jv","languageName":{"simpleText":"Basa Jawa - 爪哇语"}},{"languageCode":"zh-Hant","languageName":{"simpleText":"中文（繁體）- 中文（繁体）"}},{"languageCode":"zh-Hans","languageName":{"simpleText":"中文（简体）"}},{"languageCode":"zu","languageName":{"simpleText":"isiZulu - 祖鲁语"}},{"languageCode":"kri","languageName":{"simpleText":"Kr\xec\xec - 克里语"}}],"MOBILE":[{"languageCode":"sq","languageName":{"runs":[{"text":"Shqip - 阿尔巴尼亚语"}]}},{"languageCode":"ak","languageName":{"runs":[{"text":"\xc1k\xe1n - 阿肯语"}]}},{"languageCode":"ar","languageName":{"runs":[{"text":"العربية - 阿拉伯语"}]}},{"languageCode":"am","languageName":{"runs":[{"text":"አማርኛ - 阿姆哈拉语"}]}},{"languageCode":"as","languageName":{"runs":[{"text":"অসমীয়া - 阿萨姆语"}]}},{"languageCode":"az","languageName":{"runs":[{"text":"Azərbaycanca - 阿塞拜疆语"}]}},{"languageCode":"ee","languageName":{"runs":[{"text":"Eʋegbe - 埃维语"}]}},{"languageCode":"ay","languageName":{"runs":[{"text":"Aymar - 艾马拉语"}]}},{"languageCode":"ga","languageName":{"runs":[{"text":"Gaeilge - 爱尔兰语"}]}},{"languageCode":"et","languageName":{"runs":[{"text":"Eesti - 爱沙尼亚语"}]}},{"languageCode":"or","languageName":{"runs":[{"text":"ଓଡ଼ିଆ - 奥里亚语"}]}},{"languageCode":"om","languageName":{"runs":[{"text":"Oromoo - 奥罗莫语"}]}},{"languageCode":"eu","languageName":{"runs":[{"text":"Euskara - 巴斯克语"}]}},{"languageCode":"be","languageName":{"runs":[{"text":"Беларуская - 白俄罗斯语"}]}},{"languageCode":"bg","languageName":{"runs":[{"text":"Български - 保加利亚语"}]}},{"languageCode":"nso","languageName":{"runs":[{"text":"Sesotho sa Leboa - 北索托语"}]}},{"languageCode":"is","languageName":{"runs":[{"text":"\xcdslenska - 冰岛语"}]}},{"languageCode":"pl","languageName":{"runs":[{"text":"Polski - 波兰语"}]}},{"languageCode":"bs","languageName":{"runs":[{"text":"Bosanski - 波斯尼亚语"}]}},{"languageCode":"fa","languageName":{"runs":[{"text":"فارسی - 波斯语"}]}},{"languageCode":"bho","languageName":{"runs":[{"text":"भोजपुरी - 博杰普尔语"}]}},{"languageCode":"ts","languageName":{"runs":[{"text":"Xitsonga - 聪加语"}]}},{"languageCode":"tt","languageName":{"runs":[{"text":"Татарча - 鞑靼语"}]}},{"languageCode":"da","languageName":{"runs":[{"text":"Dansk - 丹麦语"}]}},{"languageCode":"de","languageName":{"runs":[{"text":"Deutsch - 德语"}]}},{"languageCode":"dv","languageName":{"runs":[{"text":"ދިވެހިބަސް - 迪维希语"}]}},{"languageCode":"ru","languageName":{"runs":[{"text":"Русский - 俄语"}]}},{"languageCode":"fr","languageName":{"runs":[{"text":"Fran\xe7ais - 法语"}]}},{"languageCode":"sa","languageName":{"runs":[{"text":"संस्कृतम् - 梵语"}]}},{"languageCode":"fil","languageName":{"runs":[{"text":"Filipino - 菲律宾语"}]}},{"languageCode":"fi","languageName":{"runs":[{"text":"Suomi - 芬兰语"}]}},{"languageCode":"km","languageName":{"runs":[{"text":"ភាសាខ្មែរ - 高棉语"}]}},{"languageCode":"ka","languageName":{"runs":[{"text":"ქართული - 格鲁吉亚语"}]}},{"languageCode":"gu","languageName":{"runs":[{"text":"ગુજરાતી - 古吉拉特语"}]}},{"languageCode":"gn","languageName":{"runs":[{"text":"Ava\xf1e\'ẽ - 瓜拉尼语"}]}},{"languageCode":"kk","languageName":{"runs":[{"text":"Қазақ тілі - 哈萨克语"}]}},{"languageCode":"ht","languageName":{"runs":[{"text":"海地克里奥尔语"}]}},{"languageCode":"ko","languageName":{"runs":[{"text":"한국말 - 韩语"}]}},{"languageCode":"ha","languageName":{"runs":[{"text":"هَوُسَ - 豪萨语"}]}},{"languageCode":"nl","languageName":{"runs":[{"text":"Nederlands - 荷兰语"}]}},{"languageCode":"gl","languageName":{"runs":[{"text":"Galego - 加利西亚语"}]}},{"languageCode":"ca","languageName":{"runs":[{"text":"Catal\xe0 - 加泰罗尼亚语"}]}},{"languageCode":"cs","languageName":{"runs":[{"text":"Čeština - 捷克语"}]}},{"languageCode":"kn","languageName":{"runs":[{"text":"ಕನ್ನಡ - 卡纳达语"}]}},{"languageCode":"ky","languageName":{"runs":[{"text":"Кыргызча - 吉尔吉斯语"}]}},{"languageCode":"xh","languageName":{"runs":[{"text":"isiXhosa - 科萨语"}]}},{"languageCode":"co","languageName":{"runs":[{"text":"Corsu - 科西嘉语"}]}},{"languageCode":"hr","languageName":{"runs":[{"text":"Hrvatski - 克罗地亚语"}]}},{"languageCode":"qu","languageName":{"runs":[{"text":"Runa Simi - 克丘亚语"}]}},{"languageCode":"ku","languageName":{"runs":[{"text":"Kurd\xee - 库尔德语"}]}},{"languageCode":"la","languageName":{"runs":[{"text":"lingua latīna - 拉丁语"}]}},{"languageCode":"lv","languageName":{"runs":[{"text":"Latviešu - 拉脱维亚语"}]}},{"languageCode":"lo","languageName":{"runs":[{"text":"ລາວ - 老挝语"}]}},{"languageCode":"lt","languageName":{"runs":[{"text":"Lietuvių - 立陶宛语"}]}},{"languageCode":"ln","languageName":{"runs":[{"text":"Ling\xe1la - 林加拉语"}]}},{"languageCode":"lg","languageName":{"runs":[{"text":"Luganda - 卢干达语"}]}},{"languageCode":"lb","languageName":{"runs":[{"text":"L\xebtzebuergesch - 卢森堡语"}]}},{"languageCode":"rw","languageName":{"runs":[{"text":"Kinyarwanda - 卢旺达语"}]}},{"languageCode":"ro","languageName":{"runs":[{"text":"Rom\xe2nă - 罗马尼亚语"}]}},{"languageCode":"mt","languageName":{"runs":[{"text":"Malti - 马耳他语"}]}},{"languageCode":"mr","languageName":{"runs":[{"text":"मराठी - 马拉地语"}]}},{"languageCode":"mg","languageName":{"runs":[{"text":"Malagasy - 马拉加斯语"}]}},{"languageCode":"ml","languageName":{"runs":[{"text":"മലയാളം - 马拉雅拉姆语"}]}},{"languageCode":"ms","languageName":{"runs":[{"text":"Bahasa Melayu - 马来语"}]}},{"languageCode":"mk","languageName":{"runs":[{"text":"македонски - 马其顿语"}]}},{"languageCode":"mi","languageName":{"runs":[{"text":"Māori - 毛利语"}]}},{"languageCode":"mn","languageName":{"runs":[{"text":"Монгол - 蒙古语"}]}},{"languageCode":"bn","languageName":{"runs":[{"text":"বাংলা - 孟加拉语"}]}},{"languageCode":"my","languageName":{"runs":[{"text":"ဗမာစာ - 缅甸语"}]}},{"languageCode":"hmn","languageName":{"runs":[{"text":"Hmoob - 苗语"}]}},{"languageCode":"af","languageName":{"runs":[{"text":"Afrikaans - 南非荷兰语"}]}},{"languageCode":"st","languageName":{"runs":[{"text":"Sesotho - 南索托语"}]}},{"languageCode":"ne","languageName":{"runs":[{"text":"नेपाली - 尼泊尔语"}]}},{"languageCode":"no","languageName":{"runs":[{"text":"Norsk - 挪威语"}]}},{"languageCode":"pa","languageName":{"runs":[{"text":"ਪੰਜਾਬੀ - 旁遮普语"}]}},{"languageCode":"pt","languageName":{"runs":[{"text":"Portugu\xeas - 葡萄牙语"}]}},{"languageCode":"ps","languageName":{"runs":[{"text":"پښتو - 普什图语"}]}},{"languageCode":"ny","languageName":{"runs":[{"text":"chiCheŵa - 齐切瓦语"}]}},{"languageCode":"ja","languageName":{"runs":[{"text":"日本語 - 日语"}]}},{"languageCode":"sv","languageName":{"runs":[{"text":"Svenska - 瑞典语"}]}},{"languageCode":"sm","languageName":{"runs":[{"text":"Gagana Samoa - 萨摩亚语"}]}},{"languageCode":"sr","languageName":{"runs":[{"text":"Српски језик - 塞尔维亚语"}]}},{"languageCode":"si","languageName":{"runs":[{"text":"සිංහල - 僧伽罗语"}]}},{"languageCode":"sn","languageName":{"runs":[{"text":"ChiShona - 绍纳语"}]}},{"languageCode":"eo","languageName":{"runs":[{"text":"Esperanto - 世界语"}]}},{"languageCode":"sk","languageName":{"runs":[{"text":"Slovenčina - 斯洛伐克语"}]}},{"languageCode":"sl","languageName":{"runs":[{"text":"Slovenščina - 斯洛文尼亚语"}]}},{"languageCode":"sw","languageName":{"runs":[{"text":"Kiswahili - 斯瓦希里语"}]}},{"languageCode":"gd","languageName":{"runs":[{"text":"G\xe0idhlig - 苏格兰盖尔语"}]}},{"languageCode":"ceb","languageName":{"runs":[{"text":"Cebuano - 宿务语"}]}},{"languageCode":"so","languageName":{"runs":[{"text":"Soomaaliga - 索马里语"}]}},{"languageCode":"tg","languageName":{"runs":[{"text":"тоҷикӣ - 塔吉克语"}]}},{"languageCode":"te","languageName":{"runs":[{"text":"తెలుగు - 泰卢固语"}]}},{"languageCode":"ta","languageName":{"runs":[{"text":"தமிழ் - 泰米尔语"}]}},{"languageCode":"th","languageName":{"runs":[{"text":"ไทย - 泰语"}]}},{"languageCode":"ti","languageName":{"runs":[{"text":"ትግርኛ - 提格利尼亚语"}]}},{"languageCode":"tr","languageName":{"runs":[{"text":"T\xfcrk\xe7e - 土耳其语"}]}},{"languageCode":"tk","languageName":{"runs":[{"text":"T\xfcrkmen - 土库曼语"}]}},{"languageCode":"cy","languageName":{"runs":[{"text":"Cymraeg - 威尔士语"}]}},{"languageCode":"ug","languageName":{"runs":[{"text":"ئۇيغۇرچە - 维吾尔语"}]}},{"languageCode":"und","languageName":{"runs":[{"text":"Unknown - 未知语言"}]}},{"languageCode":"ur","languageName":{"runs":[{"text":"اردو - 乌尔都语"}]}},{"languageCode":"uk","languageName":{"runs":[{"text":"Українська - 乌克兰语"}]}},{"languageCode":"uz","languageName":{"runs":[{"text":"O‘zbek - 乌兹别克语"}]}},{"languageCode":"es","languageName":{"runs":[{"text":"Espa\xf1ol - 西班牙语"}]}},{"languageCode":"fy","languageName":{"runs":[{"text":"Frysk - 西弗里西亚语"}]}},{"languageCode":"iw","languageName":{"runs":[{"text":"עברית - 希伯来语"}]}},{"languageCode":"el","languageName":{"runs":[{"text":"Ελληνικά - 希腊语"}]}},{"languageCode":"haw","languageName":{"runs":[{"text":"ʻŌlelo Hawaiʻi - 夏威夷语"}]}},{"languageCode":"sd","languageName":{"runs":[{"text":"سنڌي - 信德语"}]}},{"languageCode":"hu","languageName":{"runs":[{"text":"Magyar - 匈牙利语"}]}},{"languageCode":"su","languageName":{"runs":[{"text":"Basa Sunda - 巽他语"}]}},{"languageCode":"hy","languageName":{"runs":[{"text":"Հայերեն - 亚美尼亚语"}]}},{"languageCode":"ig","languageName":{"runs":[{"text":"Igbo - 伊博语"}]}},{"languageCode":"it","languageName":{"runs":[{"text":"Italiano - 意大利语"}]}},{"languageCode":"yi","languageName":{"runs":[{"text":"ייִדיש - 意第绪语"}]}},{"languageCode":"hi","languageName":{"runs":[{"text":"हिन्दी - 印地语"}]}},{"languageCode":"id","languageName":{"runs":[{"text":"Bahasa Indonesia - 印度尼西亚语"}]}},{"languageCode":"en","languageName":{"runs":[{"text":"English - 英语"}]}},{"languageCode":"yo","languageName":{"runs":[{"text":"Yor\xf9b\xe1 - 约鲁巴语"}]}},{"languageCode":"vi","languageName":{"runs":[{"text":"Tiếng Việt - 越南语"}]}},{"languageCode":"jv","languageName":{"runs":[{"text":"Basa Jawa - 爪哇语"}]}},{"languageCode":"zh-Hant","languageName":{"runs":[{"text":"中文（繁體） - 中文（繁体）"}]}},{"languageCode":"zh-Hans","languageName":{"runs":[{"text":"中文（简体）"}]}},{"languageCode":"zu","languageName":{"runs":[{"text":"isiZulu - 祖鲁语"}]}},{"languageCode":"kri","languageName":{"runs":[{"text":"Kr\xec\xec - 克里语"}]}}]}}}'),Netflix:JSON.parse('{"Settings":{"Switch":true,"Type":"Translate","Languages":["AUTO","ZH"]},"Configs":{"Languages":{"AR":"ar","CS":"cs","DA":"da","DE":"de","EN":"en","EN-GB":"en-GB","EN-US":"en-US","EN-US SDH":"en-US SDH","ES":"es","ES-419":"es-419","ES-ES":"es-ES","FI":"fi","FR":"fr","HE":"he","HR":"hr","HU":"hu","ID":"id","IT":"it","JA":"ja","KO":"ko","MS":"ms","NB":"nb","NL":"nl","PL":"pl","PT":"pt","PT-PT":"pt-PT","PT-BR":"pt-BR","RO":"ro","RU":"ru","SV":"sv","TH":"th","TR":"tr","UK":"uk","VI":"vi","IS":"is","ZH":"zh","ZH-HANS":"zh-Hans","ZH-HK":"zh-HK","ZH-HANT":"zh-Hant"}}}'),Spotify:JSON.parse('{"Settings":{"Switch":true,"Types":["Translate","External"],"Languages":["AUTO","ZH"]}}'),Composite:JSON.parse('{"Settings":{"CacheSize":20,"ShowOnly":false,"Position":"Reverse","Offset":0,"Tolerance":1000}}'),Translate:JSON.parse('{"Settings":{"Vendor":"Google","ShowOnly":false,"Position":"Forward","CacheSize":10,"Method":"Part","Times":3,"Interval":500,"Exponential":true}}'),External:JSON.parse('{"Settings":{"SubVendor":"URL","LrcVendor":"NeteaseMusic","CacheSize":50}}'),API:JSON.parse('{"Settings":{"GoogleCloud":{"Version":"v2","Mode":"Key","Auth":""},"Microsoft":{"Version":"Azure","Mode":"Token","Region":"","Auth":""},"DeepL":{"Version":"Free","Auth":""},"DeepLX":{"Endpoint":"","Auth":""},"URL":"","NeteaseMusic":{"PhoneNumber":"","Password":""}}}')};function m(e,a=100){return l(`☑️ Set Cache, cacheSize: ${a}`,""),e=(e=Array.from(e||[])).slice(-a),l(`✅ Set Cache`,""),e}l("v1.4.0(1007)");let d=new class e{constructor(e,a){return console.log(`
🟧 URL v2.1.2
`),e=this.#l(e,a),this}#l(e,a){let t=/(?:(?<protocol>\w+:)\/\/(?:(?<username>[^\s:"]+)(?::(?<password>[^\s:"]+))?@)?(?<host>[^\s@/]+))?(?<pathname>\/?[^\s@?]+)?(?<search>\?[^\s?]+)?/,s=/(?<hostname>.+):(?<port>\d+)$/;if(e=e.match(t)?.groups||{},a&&(!(a=a?.match(t)?.groups||{}).protocol||!a.hostname))throw Error(`🚨 ${name}, ${a} is not a valid URL`);if((e.protocol||a?.protocol)&&(this.protocol=e.protocol||a.protocol),(e.username||a?.username)&&(this.username=e.username||a.username),(e.password||a?.password)&&(this.password=e.password||a.password),(e.host||a?.host)&&(this.host=e.host||a.host,Object.freeze(this.host),this.hostname=this.host.match(s)?.groups.hostname??this.host,this.port=this.host.match(s)?.groups.port??""),e.pathname||a?.pathname){if(this.pathname=e.pathname||a?.pathname,!this.pathname.startsWith("/")&&(this.pathname="/"+this.pathname),this.paths=this.pathname.split("/").filter(Boolean),Object.freeze(this.paths),this.paths){let e=this.paths[this.paths.length-1];if(e?.includes(".")){let a=e.split(".");this.format=a[a.length-1],Object.freeze(this.format)}}}else this.pathname="";return(e.search||a?.search)&&(this.search=e.search||a.search,Object.freeze(this.search),this.search&&(this.searchParams=this.search.slice(1).split("&").map(e=>e.split("=")))),this.searchParams=new Map(this.searchParams||[]),this.harf=this.toString(),Object.freeze(this.harf),this}toString(){let e="";return this.protocol&&(e+=this.protocol+"//"),this.username&&(e+=this.username+(this.password?":"+this.password:"")+"@"),this.hostname&&(e+=this.hostname),this.port&&(e+=":"+this.port),this.pathname&&(e+=this.pathname),0!==this.searchParams.size&&(e+="?"+Array.from(this.searchParams).map(e=>e.join("=")).join("&")),e}toJSON(){return JSON.stringify({...this})}}($request.url);l(`⚠ url: ${d.toJSON()}`,"");let c=$request.method,p=d.hostname,h=d.pathname;d.pathname.split("/").filter(Boolean),l(`⚠ METHOD: ${c}, HOST: ${p}, PATH: ${h}`,"");let N=($response.headers?.["Content-Type"]??$response.headers?.["content-type"])?.split(";")?.[0];function C(e,a,t){l(`☑️ getPlaylistCache, language: ${t}`,"");let s="",n={},g=0;return a?.forEach((a,i)=>{if(Array.isArray(a?.[t])){let u=a?.[t];u?.some((a,t)=>!!e.includes(a?.URI??a?.OPTION?.URI??null)&&(g=t,l(`🚧 getPlaylistCache`,`subtitlesPlaylistIndex: ${g}`,""),!0))&&(s=i,n=a)}}),l(`✅ getPlaylistCache`,`masterPlaylistURL: ${JSON.stringify(s)}`,""),{masterPlaylistURL:s,subtitlesPlaylist:n,subtitlesPlaylistIndex:g}}async function T(e,a,t,s=0,n="Universal"){return l(`☑️ setSubtitlesCache, language: ${t}, index: ${s}`,""),await Promise.all(a?.[t]?.map(async(a,t,g)=>{if(g[s]&&t===s||!g[s]){let t=e.get(a.URL)??[];0===t.length&&(t=await x(a?.URL,$request.headers,n)),0!==t.length&&(e=e.set(a.URL,t)),l(`✅ setSubtitlesCache`,`val?.URL: ${a?.URL}`,"")}})),e}async function x(e,a,t){l(`☑️ Get Subtitle *.vtt *.ttml URLs`,"");let s=await n(e,{headers:a}).then((a,t)=>g.parse(a.body).filter(({URI:e})=>/^.+\.((web)?vtt|ttml2?|xml|smi)(\?.+)?$/.test(e)).filter(({URI:e})=>!e.includes("empty")).filter(({URI:e})=>!e.includes("blank")).filter(({URI:e})=>!e.includes("default")).map(({URI:a})=>u(e,a)));switch(t){case"Disney+":s.some(e=>/\/.+-MAIN\//.test(e))&&(s=s.filter(e=>/\/.+-MAIN\//.test(e)));break;case"PrimeVideo":s.some(e=>/\/aiv-prod-timedtext\//.test(e))&&(s=s.filter(e=>/\/aiv-prod-timedtext\//.test(e))),s=s.filter((e,a,t)=>t.indexOf(e,0)===a)}return l(`✅ Get Subtitle *.vtt *.ttml URLs, subtitles: ${s}`,""),s}l(`⚠ FORMAT: ${N}`,""),(async()=>{var e;let a;let n=(e=$request.url,l(`☑️ Detect Platform`,""),a=/\.(netflix\.com|nflxvideo\.net)/i.test(e)?"Netflix":/(\.youtube|youtubei\.googleapis)\.com/i.test(e)?"YouTube":/\.spotify(cdn)?\.com/i.test(e)?"Spotify":/\.apple\.com/i.test(e)?"Apple":/\.(dssott|starott)\.com/i.test(e)?"Disney+":/primevideo\.com|(\.(pv-cdn|aiv-cdn|akamaihd|cloudfront)\.net)|s3\.amazonaws\.com\/aiv-prod-timedtext\//i.test(e)?"PrimeVideo":/prd\.media\.h264\.io/i.test(e)?"Max":/\.(api\.hbo|hbomaxcdn)\.com/i.test(e)?"HBOMax":/\.hulu(stream|im)?\.com/i.test(e)?"Hulu":/\.(pplus\.paramount\.tech|cbs(aavideo|cbsivideo)?\.com)/i.test(e)?"Paramount+":/\.uplynk\.com/i.test(e)?"Discovery+":/dplus-ph-/i.test(e)?"Discovery+Ph":/\.peacocktv\.com/i.test(e)?"PeacockTV":/\.fubo\.tv/i.test(e)?"FuboTV":/\.viki\.io/i.test(e)?"Viki":/epix(hls\.akamaized\.net|\.services\.io)/i.test(e)?"MGM+":/\.nebula\.app/i.test(e)?"Nebula":/\.pluto(\.tv|tv\.net)/i.test(e)?"PlutoTV":/\.mubicdn\.net/i.test(e)?"MUBI":"Universal",l(`✅ Detect Platform, Platform: ${a}`,""),a);l(`⚠ PLATFORM: ${n}`,"");let{Settings:i,Caches:u,Configs:c}=function(e,a,n){l(`☑️ Set Environment Variables`,"");let{Settings:g,Caches:i,Configs:u}=function(e,a,n){let l=s.getItem(e,n),g={};switch(typeof $argument){case"string":let i=Object.fromEntries($argument.split("&").map(e=>e.split("=").map(e=>e.replace(/\"/g,""))));for(let e in i)t.set(g,e,i[e]);break;case"object":for(let e in $argument)t.set(g,e,$argument[e])}let u={Settings:n?.Default?.Settings||{},Configs:n?.Default?.Configs||{},Caches:{}};for(let e of(!Array.isArray(a)&&(a=[a]),a))u.Settings={...u.Settings,...n?.[e]?.Settings,...g,...l?.[e]?.Settings},u.Configs={...u.Configs,...n?.[e]?.Configs},l?.[e]?.Caches&&"string"==typeof l?.[e]?.Caches&&(l[e].Caches=JSON.parse(l?.[e]?.Caches)),u.Caches={...u.Caches,...l?.[e]?.Caches};return function e(a,t){for(var s in a){var n=a[s];a[s]="object"==typeof n&&null!==n?e(n,t):t(s,n)}return a}(u.Settings,(e,a)=>("true"===a||"false"===a?a=JSON.parse(a):"string"==typeof a&&(a=a.includes(",")?a.split(",").map(e=>o(e)):o(a)),a)),u;function o(e){return e&&!isNaN(e)&&(e=parseInt(e,10)),e}}(e,a,n);return!Array.isArray(g?.Types)&&(g.Types=g.Types?[g.Types]:[]),l(`✅ Set Environment Variables, Settings: ${typeof g}, Settings内容: ${JSON.stringify(g)}`,""),("object"!=typeof i?.Playlists||Array.isArray(i?.Playlists))&&(i.Playlists={}),i.Playlists.Master=new Map(JSON.parse(i?.Playlists?.Master||"[]")),i.Playlists.Subtitle=new Map(JSON.parse(i?.Playlists?.Subtitle||"[]")),"object"!=typeof i?.Subtitles&&(i.Subtitles=new Map(JSON.parse(i?.Subtitles||"[]"))),("object"!=typeof i?.Metadatas||Array.isArray(i?.Metadatas))&&(i.Metadatas={}),"object"!=typeof i?.Metadatas?.Tracks&&(i.Metadatas.Tracks=new Map(JSON.parse(i?.Metadatas?.Tracks||"[]"))),{Settings:g,Caches:i,Configs:u}}("DualSubs",[["YouTube","Netflix","BiliBili","Spotify"].includes(n)?n:"Universal","Composite"],r);switch(l(`⚠ Settings.Switch: ${i?.Switch}`,""),i.Switch){case!0:default:let p=d.searchParams?.get("subtype")??i.Type,h=[d.searchParams?.get("lang")?.toUpperCase?.()??i.Languages[0],(d.searchParams?.get("tlang")??u?.tlang)?.toUpperCase?.()??i.Languages[1]];l(`⚠ Type: ${p}, Languages: ${h}`,"");let{standard:x,device:y}=function(e=new URL,a={},t="Universal"){l(`☑️ is Standard?`,"");let s=a["user-agent"]??a["User-Agent"];l(`🚧 is Standard?, UA: ${s}`,"");let n=s.includes("Mozilla/5.0")?"Web":s.includes("iPhone")?"iPhone":s.includes("iPad")?"iPad":s.includes("Macintosh")?"Macintosh":s.includes("AppleTV")?"AppleTV":s.includes("Apple TV")?"AppleTV":"iPhone";switch(t){case"Max":case"HBOMax":a["x-hbo-device-name"]?.includes("ios")?n="iPhone":"iphone"===e.searchParams.get("device-code")&&(n="iPhone");break;case"PeacockTV":s.includes("PeacockMobile")&&(n="iPhone")}let g=!0;switch(n){case"iPhone":case"iPad":case"Macintosh":switch(t){case"Max":case"HBOMax":case"Viki":case"PeacockTV":case"FuboTV":case"MUBI":g=!1;break;default:g=!0}break;case"Web":switch(t){case"Max":case"HBOMax":case"FuboTV":case"TED":case"MUBI":g=!1;break;default:g=!0}break;default:g=!0}return l(`✅ is Standard?, standard: ${g}, device: ${n}`,""),{standard:g,device:n}}(d,$request.headers,n),f={};switch(N){case void 0:case"application/x-www-form-urlencoded":case"text/plain":default:case"text/xml":case"text/html":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":case"text/vtt":case"application/vtt":break;case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":switch(function(e={}){let a;l(`☑️ detectPlaylist`,"");return e.forEach(e=>{switch(e.TAG){case"#EXT-X-MEDIA":case"#EXT-X-STREAM-INF":a="Multivariant Playlist";break;case"#EXT-X-PLAYLIST-TYPE":case"EXT-X-TARGETDURATION":case"#EXTINF":a="Media Playlist"}}),l(`✅ detectPlaylist, type: ${a}`,""),a}(f=g.parse($response.body))){case"Multivariant Playlist":let S=u.Playlists.Master.get($request.url)||{};S[h[0]]=new o(N,n).get($request.url,f,"SUBTITLES",c.Languages[h[0]]),S[h[1]]=new o(N,n).get($request.url,f,"SUBTITLES",c.Languages[h[1]]),f=new o(N,n).set(f,S,i.Types,h,x,y),u.Playlists.Master.set($request.url,S),u.Playlists.Master=m(u.Playlists.Master,i.CacheSize),s.setItem("@DualSubs.Composite.Caches.Playlists.Master",u.Playlists.Master);break;case"Media Playlist":switch(p){case"Official":l(`⚠ 官方字幕`,"");let{subtitlesPlaylist:b,subtitlesPlaylistIndex:O}=C($request.url,u.Playlists.Master,h[0])??C($request.url,u.Playlists.Master,h[1]);u.Playlists.Subtitle=await T(u.Playlists.Subtitle,b,h[0],O,n),u.Playlists.Subtitle=await T(u.Playlists.Subtitle,b,h[1],O,n),u.Playlists.Subtitle=m(u?.Playlists.Subtitle,i.CacheSize),s.setItem("@DualSubs.Composite.Caches.Playlists.Subtitle",u.Playlists.Subtitle);break;case"Translate":default:l(`⚠ 翻译字幕`,"");break;case"External":l(`⚠ 外挂字幕`,"")}f=f.map((e,a)=>{if(/^.+\.((web)?vtt|ttml2?|xml|smi)(\?.+)?$/.test(e?.URI)){let t=e.URI.includes("?")?"&":"?";if(!/empty|blank|default/.test(e.URI)&&(e.URI+=`${t}subtype=${p}`,d.searchParams?.has("lang")&&(e.URI+=`&lang=${d.searchParams.get("lang")}`)),"#EXT-X-BYTERANGE"!==e.TAG)return e;f[a-1].URI=e.URI}else if(e?.URI&&"MGM+"===n)return e.URI+=`?subtype=${p}`,d.searchParams?.has("lang")&&(e.URI+=`&lang=${d.searchParams.get("lang")}`),e;else return e})}$response.body=g.stringify(f);break;case"text/json":case"application/json":f=JSON.parse($response.body??"{}");let k=u.Playlists.Master.get($request.url)||{};if("PrimeVideo"===n)f?.subtitleUrls&&(k[h[0]]=new o(N,n).get($request.url,f,"subtitleUrls",c.Languages[h[0]]),k[h[1]]=new o(N,n).get($request.url,f,"subtitleUrls",c.Languages[h[1]]),f.subtitleUrls=new o(N,n).set(f.subtitleUrls,k,i.Types,h,x,y));u.Playlists.Master.set($request.url,k),u.Playlists.Master=m(u.Playlists.Master,i.CacheSize),s.setItem("@DualSubs.Composite.Caches.Playlists.Master",u.Playlists.Master),$response.body=JSON.stringify(f);case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"application/octet-stream":}case!1:}})().catch(e=>(function(e){switch(a){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:l("",`❗️执行错误!`,e,"");break;case"Node.js":l("",`❗️执行错误!`,e.stack,"")}})(e)).finally(()=>(function(e={}){switch(a){case"Surge":e.policy&&t.set(e,"headers.X-Surge-Policy",e.policy),l("",`🚩 执行结束! 🕛 ${new Date().getTime()/1e3-$script.startTime} 秒`,""),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),l("",`🚩 执行结束! 🕛 ${(new Date-$script.startTime)/1e3} 秒`,""),$done(e);break;case"Stash":e.policy&&t.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),l("",`🚩 执行结束! 🕛 ${(new Date-$script.startTime)/1e3} 秒`,""),$done(e);break;case"Egern":case"Shadowrocket":default:l("",`🚩 执行结束!`,""),$done(e);break;case"Quantumult X":e.policy&&t.set(e,"opts.policy",e.policy),delete e["auto-redirect"],delete e["auto-cookie"],delete e["binary-mode"],delete e.charset,delete e.host,delete e.insecure,delete e.method,delete e.opt,delete e.path,delete e.policy,delete e["policy-descriptor"],delete e.scheme,delete e.sessionIndex,delete e.statusCode,delete e.timeout,e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,delete e.body):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),delete e.body):e.body&&delete e.bodyBytes,l("",`🚩 执行结束!`,""),$done(e);break;case"Node.js":l("",`🚩 执行结束!`,""),process.exit(1)}})($response))}},a={};function t(s){var n=a[s];if(void 0!==n)return n.exports;var l=a[s]={exports:{}};return e[s](l,l.exports,t),l.exports}t.rv=function(){return"1.0.11"},t.ruid="bundler=rspack@1.0.11",t("803")})();
//# sourceMappingURL=Manifest.response.bundle.js.map