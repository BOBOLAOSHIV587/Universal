{"version":3,"file":"Composite.Subtitles.response.bundle.js","sources":["webpack://universal/./src/utils/platform.mjs","webpack://universal/./src/utils/Lodash.mjs","webpack://universal/./src/utils/Storage.mjs","webpack://universal/./src/utils/fetch.mjs","webpack://universal/./src/utils/initGotEnv.mjs","webpack://universal/./src/utils/URL.mjs","webpack://universal/./src/utils/logError.mjs","webpack://universal/./src/utils/done.mjs"],"sourcesContent":["export const $platform = platform();\r\nexport function platform() {\r\n    if (\"undefined\" !== typeof $environment && $environment[\"surge-version\"])\r\n        return \"Surge\"\r\n    if (\"undefined\" !== typeof $environment && $environment[\"stash-version\"])\r\n        return \"Stash\"\r\n    if (\"undefined\" !== typeof module && !!module.exports) return \"Node.js\"\r\n    if (\"undefined\" !== typeof $task) return \"Quantumult X\"\r\n    if (\"undefined\" !== typeof $loon) return \"Loon\"\r\n    if (\"undefined\" !== typeof $rocket) return \"Shadowrocket\"\r\n    if (\"undefined\" !== typeof Egern) return \"Egern\"\r\n}\r\n","/* https://www.lodashjs.com */\r\nexport default class Lodash {\r\n\tstatic name = \"Lodash\";\r\n\tstatic version = \"1.2.2\";\r\n\tstatic about() { return console.log(`\\n🟧 ${this.name} v${this.version}\\n`) };\r\n\r\n\tstatic get(object = {}, path = \"\", defaultValue = undefined) {\r\n\t\t// translate array case to dot case, then split with .\r\n\t\t// a[0].b -> a.0.b -> ['a', '0', 'b']\r\n\t\tif (!Array.isArray(path)) path = this.toPath(path)\r\n\r\n\t\tconst result = path.reduce((previousValue, currentValue) => {\r\n\t\t\treturn Object(previousValue)[currentValue]; // null undefined get attribute will throwError, Object() can return a object \r\n\t\t}, object)\r\n\t\treturn (result === undefined) ? defaultValue : result;\r\n\t}\r\n\r\n\tstatic set(object = {}, path = \"\", value) {\r\n\t\tif (!Array.isArray(path)) path = this.toPath(path)\r\n\t\tpath\r\n\t\t\t.slice(0, -1)\r\n\t\t\t.reduce(\r\n\t\t\t\t(previousValue, currentValue, currentIndex) =>\r\n\t\t\t\t\t(Object(previousValue[currentValue]) === previousValue[currentValue])\r\n\t\t\t\t\t\t? previousValue[currentValue]\r\n\t\t\t\t\t\t: previousValue[currentValue] = (/^\\d+$/.test(path[currentIndex + 1]) ? [] : {}),\r\n\t\t\t\tobject\r\n\t\t\t)[path[path.length - 1]] = value\r\n\t\treturn object\r\n\t}\r\n\r\n\tstatic unset(object = {}, path = \"\") {\r\n\t\tif (!Array.isArray(path)) path = this.toPath(path)\r\n\t\tlet result = path.reduce((previousValue, currentValue, currentIndex) => {\r\n\t\t\tif (currentIndex === path.length - 1) {\r\n\t\t\t\tdelete previousValue[currentValue]\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn Object(previousValue)[currentValue]\r\n\t\t}, object)\r\n\t\treturn result\r\n\t}\r\n\r\n\tstatic toPath(value) {\r\n\t\treturn value.replace(/\\[(\\d+)\\]/g, '.$1').split('.').filter(Boolean);\r\n\t}\r\n\r\n\tstatic escape(string) {\r\n\t\tconst map = {\r\n\t\t\t'&': '&amp;',\r\n\t\t\t'<': '&lt;',\r\n\t\t\t'>': '&gt;',\r\n\t\t\t'\"': '&quot;',\r\n\t\t\t\"'\": '&#39;',\r\n\t\t}\r\n\t\treturn string.replace(/[&<>\"']/g, m => map[m])\r\n\t};\r\n\r\n\tstatic unescape(string) {\r\n\t\tconst map = {\r\n\t\t\t'&amp;': '&',\r\n\t\t\t'&lt;': '<',\r\n\t\t\t'&gt;': '>',\r\n\t\t\t'&quot;': '\"',\r\n\t\t\t'&#39;': \"'\",\r\n\t\t}\r\n\t\treturn string.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g, m => map[m])\r\n\t}\r\n\r\n}\r\n","import { $platform, _, log } from \"./utils.mjs\";\r\n/* https://developer.mozilla.org/zh-CN/docs/Web/API/Storage/setItem */\r\nexport default class Storage {\r\n\tstatic name = \"Storage\";\r\n\tstatic version = \"1.1.0\";\r\n\tstatic about () { return log(\"\", `🟧 ${this.name} v${this.version}`, \"\") };\r\n\tstatic data = null;\r\n\tstatic dataFile = 'box.dat';\r\n\tstatic #nameRegex = /^@(?<key>[^.]+)(?:\\.(?<path>.*))?$/;\r\n\r\n    static getItem(keyName = new String, defaultValue = null) {\r\n        let keyValue = defaultValue;\r\n        // 如果以 @\r\n\t\tswitch (keyName.startsWith('@')) {\r\n\t\t\tcase true:\r\n\t\t\t\tconst { key, path } = keyName.match(this.#nameRegex)?.groups;\r\n\t\t\t\t//log(`1: ${key}, ${path}`);\r\n\t\t\t\tkeyName = key;\r\n\t\t\t\tlet value = this.getItem(keyName, {});\r\n\t\t\t\t//log(`2: ${JSON.stringify(value)}`)\r\n\t\t\t\tif (typeof value !== \"object\") value = {};\r\n\t\t\t\t//log(`3: ${JSON.stringify(value)}`)\r\n\t\t\t\tkeyValue = _.get(value, path);\r\n\t\t\t\t//log(`4: ${JSON.stringify(keyValue)}`)\r\n\t\t\t\ttry {\r\n\t\t\t\t\tkeyValue = JSON.parse(keyValue);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// do nothing\r\n\t\t\t\t};\r\n\t\t\t\t//log(`5: ${JSON.stringify(keyValue)}`)\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tswitch ($platform) {\r\n\t\t\t\t\tcase 'Surge':\r\n\t\t\t\t\tcase 'Loon':\r\n\t\t\t\t\tcase 'Stash':\r\n\t\t\t\t\tcase 'Egern':\r\n\t\t\t\t\tcase 'Shadowrocket':\r\n\t\t\t\t\t\tkeyValue = $persistentStore.read(keyName);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Quantumult X':\r\n\t\t\t\t\t\tkeyValue = $prefs.valueForKey(keyName);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Node.js':\r\n\t\t\t\t\t\tthis.data = this.#loaddata(this.dataFile);\r\n\t\t\t\t\t\tkeyValue = this.data?.[keyName];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tkeyValue = this.data?.[keyName] || null;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tkeyValue = JSON.parse(keyValue);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// do nothing\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t\treturn keyValue ?? defaultValue;\r\n    };\r\n\r\n\tstatic setItem(keyName = new String, keyValue = new String) {\r\n\t\tlet result = false;\r\n\t\t//log(`0: ${typeof keyValue}`);\r\n\t\tswitch (typeof keyValue) {\r\n\t\t\tcase \"object\":\r\n\t\t\t\tkeyValue = JSON.stringify(keyValue);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tkeyValue = String(keyValue);\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t\tswitch (keyName.startsWith('@')) {\r\n\t\t\tcase true:\r\n\t\t\t\tconst { key, path } = keyName.match(this.#nameRegex)?.groups;\r\n\t\t\t\t//log(`1: ${key}, ${path}`);\r\n\t\t\t\tkeyName = key;\r\n\t\t\t\tlet value = this.getItem(keyName, {});\r\n\t\t\t\t//log(`2: ${JSON.stringify(value)}`)\r\n\t\t\t\tif (typeof value !== \"object\") value = {};\r\n\t\t\t\t//log(`3: ${JSON.stringify(value)}`)\r\n\t\t\t\t_.set(value, path, keyValue);\r\n\t\t\t\t//log(`4: ${JSON.stringify(value)}`)\r\n\t\t\t\tresult = this.setItem(keyName, value);\r\n\t\t\t\t//log(`5: ${result}`)\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tswitch ($platform) {\r\n\t\t\t\t\tcase 'Surge':\r\n\t\t\t\t\tcase 'Loon':\r\n\t\t\t\t\tcase 'Stash':\r\n\t\t\t\t\tcase 'Egern':\r\n\t\t\t\t\tcase 'Shadowrocket':\r\n\t\t\t\t\t\tresult = $persistentStore.write(keyValue, keyName);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Quantumult X':\r\n\t\t\t\t\t\tresult =$prefs.setValueForKey(keyValue, keyName);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Node.js':\r\n\t\t\t\t\t\tthis.data = this.#loaddata(this.dataFile)\r\n\t\t\t\t\t\tthis.data[keyName] = keyValue\r\n\t\t\t\t\t\tthis.#writedata(this.dataFile)\r\n\t\t\t\t\t\tresult = true\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tresult = this.data?.[keyName] || null\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t\treturn result;\r\n\t};\r\n\r\n    static removeItem(keyName){\r\n\t\tlet result = false;\r\n\t\tswitch (keyName.startsWith('@')) {\r\n\t\t\tcase true:\r\n\t\t\t\tconst { key, path } = keyName.match(this.#nameRegex)?.groups;\r\n\t\t\t\tkeyName = key;\r\n\t\t\t\tlet value = this.getItem(keyName);\r\n\t\t\t\tif (typeof value !== \"object\") value = {};\r\n\t\t\t\tkeyValue = _.unset(value, path);\r\n\t\t\t\tresult = this.setItem(keyName, value);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tswitch ($platform) {\r\n\t\t\t\t\tcase 'Surge':\r\n\t\t\t\t\tcase 'Loon':\r\n\t\t\t\t\tcase 'Stash':\r\n\t\t\t\t\tcase 'Egern':\r\n\t\t\t\t\tcase 'Shadowrocket':\r\n\t\t\t\t\t\tresult = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Quantumult X':\r\n\t\t\t\t\t\tresult = $prefs.removeValueForKey(keyName);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Node.js':\r\n\t\t\t\t\t\tresult = false\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tresult = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t\treturn result;\r\n    }\r\n\r\n    static clear() {\r\n\t\tlet result = false;\r\n\t\tswitch ($platform) {\r\n\t\t\tcase 'Surge':\r\n\t\t\tcase 'Loon':\r\n\t\t\tcase 'Stash':\r\n\t\t\tcase 'Egern':\r\n\t\t\tcase 'Shadowrocket':\r\n\t\t\t\tresult = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Quantumult X':\r\n\t\t\t\tresult = $prefs.removeAllValues();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Node.js':\r\n\t\t\t\tresult = false\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresult = false;\r\n\t\t\t\tbreak;\r\n\t\t};\r\n\t\treturn result;\r\n    }\r\n\r\n\tstatic #loaddata(dataFile) {\r\n\t\tif (this.isNode()) {\r\n\t\t\tthis.fs = this.fs ? this.fs : require('fs')\r\n\t\t\tthis.path = this.path ? this.path : require('path')\r\n\t\t\tconst curDirDataFilePath = this.path.resolve(dataFile)\r\n\t\t\tconst rootDirDataFilePath = this.path.resolve(\r\n\t\t\t\tprocess.cwd(),\r\n\t\t\t\tdataFile\r\n\t\t\t)\r\n\t\t\tconst isCurDirDataFile = this.fs.existsSync(curDirDataFilePath)\r\n\t\t\tconst isRootDirDataFile =\r\n\t\t\t\t!isCurDirDataFile && this.fs.existsSync(rootDirDataFilePath)\r\n\t\t\tif (isCurDirDataFile || isRootDirDataFile) {\r\n\t\t\t\tconst datPath = isCurDirDataFile\r\n\t\t\t\t\t? curDirDataFilePath\r\n\t\t\t\t\t: rootDirDataFilePath\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn JSON.parse(this.fs.readFileSync(datPath))\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t} else return {}\r\n\t\t} else return {}\r\n\t}\r\n\r\n\tstatic #writedata(dataFile = this.dataFile) {\r\n\t\tif (this.isNode()) {\r\n\t\t\tthis.fs = this.fs ? this.fs : require('fs')\r\n\t\t\tthis.path = this.path ? this.path : require('path')\r\n\t\t\tconst curDirDataFilePath = this.path.resolve(dataFile)\r\n\t\t\tconst rootDirDataFilePath = this.path.resolve(\r\n\t\t\t\tprocess.cwd(),\r\n\t\t\t\tdataFile\r\n\t\t\t)\r\n\t\t\tconst isCurDirDataFile = this.fs.existsSync(curDirDataFilePath)\r\n\t\t\tconst isRootDirDataFile =\r\n\t\t\t\t!isCurDirDataFile && this.fs.existsSync(rootDirDataFilePath)\r\n\t\t\tconst jsondata = JSON.stringify(this.data)\r\n\t\t\tif (isCurDirDataFile) {\r\n\t\t\t\tthis.fs.writeFileSync(curDirDataFilePath, jsondata)\r\n\t\t\t} else if (isRootDirDataFile) {\r\n\t\t\t\tthis.fs.writeFileSync(rootDirDataFilePath, jsondata)\r\n\t\t\t} else {\r\n\t\t\t\tthis.fs.writeFileSync(curDirDataFilePath, jsondata)\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}\r\n","import { $platform, _ } from \"./utils.mjs\";\r\nimport initGotEnv from \"./initGotEnv.mjs\";\r\nexport default async function fetch(request = {} || \"\", option = {}) {\r\n    // 初始化参数\r\n    switch (request.constructor) {\r\n        case Object:\r\n            request = { ...option, ...request };\r\n            break;\r\n        case String:\r\n            request = { ...option, \"url\": request };\r\n            break;\r\n    };\r\n    // 自动判断请求方法\r\n    if (!request.method) {\r\n        request.method = \"GET\";\r\n        if (request.body ?? request.bodyBytes) request.method = \"POST\";\r\n    };\r\n    // 移除请求头中的部分参数, 让其自动生成\r\n    delete request.headers?.Host;\r\n    delete request.headers?.[\":authority\"];\r\n    delete request.headers?.[\"Content-Length\"];\r\n    delete request.headers?.[\"content-length\"];\r\n    // 定义请求方法（小写）\r\n    const method = request.method.toLocaleLowerCase();\r\n    // 判断平台\r\n    switch ($platform) {\r\n        case \"Loon\":\r\n        case \"Surge\":\r\n        case \"Stash\":\r\n        case \"Egern\":\r\n        case \"Shadowrocket\":\r\n        default:\r\n            // 转换请求参数\r\n            if (request.timeout) {\r\n                request.timeout = parseInt(request.timeout, 10);\r\n                switch ($platform) {\r\n                    case \"Loon\":\r\n                    case \"Shadowrocket\":\r\n                    case \"Stash\":\r\n                    case \"Egern\":\r\n                    default:\r\n                        request.timeout = request.timeout / 1000;\r\n                        break;\r\n                    case \"Surge\":\r\n                        break;\r\n                };\r\n            };\r\n            if (request.policy) {\r\n                switch ($platform) {\r\n                    case \"Loon\":\r\n                        request.node = request.policy;\r\n                        break;\r\n                    case \"Stash\":\r\n                        _.set(request, \"headers.X-Stash-Selected-Proxy\", encodeURI(request.policy));\r\n                        break;\r\n                    case \"Shadowrocket\":\r\n                        _.set(request, \"headers.X-Surge-Proxy\", request.policy);\r\n                        break;\r\n                };\r\n            };\r\n            if (typeof request.redirection === \"boolean\") request[\"auto-redirect\"] = request.redirection;\r\n            // 转换请求体\r\n            if (request.bodyBytes && !request.body) {\r\n                request.body = request.bodyBytes;\r\n                delete request.bodyBytes;\r\n            };\r\n            // 发送请求\r\n            return await new Promise((resolve, reject) => {\r\n                $httpClient[method](request, (error, response, body) => {\r\n                    if (error) reject(error);\r\n                    else {\r\n                        response.ok = /^2\\d\\d$/.test(response.status);\r\n                        response.statusCode = response.status;\r\n                        if (body) {\r\n                            response.body = body;\r\n                            if (request[\"binary-mode\"] == true) response.bodyBytes = body;\r\n                        };\r\n                        resolve(response);\r\n                    }\r\n                });\r\n            });\r\n        case \"Quantumult X\":\r\n            // 转换请求参数\r\n            if (request.policy) _.set(request, \"opts.policy\", request.policy);\r\n            if (typeof request[\"auto-redirect\"] === \"boolean\") _.set(request, \"opts.redirection\", request[\"auto-redirect\"]);\r\n            // 转换请求体\r\n            if (request.body instanceof ArrayBuffer) {\r\n                request.bodyBytes = request.body;\r\n                delete request.body;\r\n            } else if (ArrayBuffer.isView(request.body)) {\r\n                request.bodyBytes = request.body.buffer.slice(request.body.byteOffset, request.body.byteLength + request.body.byteOffset);\r\n                delete object.body;\r\n            } else if (request.body) delete request.bodyBytes;\r\n            // 发送请求\r\n            return await $task.fetch(request).then(\r\n                response => {\r\n                    response.ok = /^2\\d\\d$/.test(response.statusCode);\r\n                    response.status = response.statusCode;\r\n                    return response;\r\n                },\r\n                reason => Promise.reject(reason.error));\r\n        case \"Node.js\":\r\n            let iconv = require(\"iconv-lite\")\r\n            initGotEnv(request)\r\n            const { url, ...option } = request\r\n            return await this.got[method](url, option)\r\n                .on(\"redirect\", (response, nextOpts) => {\r\n                    try {\r\n                        if (response.headers[\"set-cookie\"]) {\r\n                            const ck = response.headers[\"set-cookie\"]\r\n                                .map(this.cktough.Cookie.parse)\r\n                                .toString()\r\n                            if (ck) {\r\n                                this.ckjar.setCookieSync(ck, null)\r\n                            }\r\n                            nextOpts.cookieJar = this.ckjar\r\n                        }\r\n                    } catch (e) {\r\n                        this.logErr(e)\r\n                    }\r\n                    // this.ckjar.setCookieSync(response.headers[\"set-cookie\"].map(Cookie.parse).toString())\r\n                })\r\n                .then(\r\n                    response => {\r\n                        response.statusCode = response.status;\r\n                        response.body = iconv.decode(response.rawBody, \"utf-8\");\r\n                        response.bodyBytes = response.rawBody;\r\n                        return response;\r\n                    },\r\n                    error => Promise.reject(error.message));\r\n    };\r\n};\r\n","export default function initGotEnv(opts) {\r\n    this.got = this.got ? this.got : require(\"got\");\r\n    this.cktough = this.cktough ? this.cktough : require(\"tough-cookie\");\r\n    this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar();\r\n    if (opts) {\r\n        opts.headers = opts.headers ? opts.headers : {}\r\n        if (undefined === opts.headers.Cookie && undefined === opts.cookieJar) {\r\n            opts.cookieJar = this.ckjar\r\n        }\r\n    };\r\n};\r\n","export default class URL {\r\n\tconstructor(url, base = undefined) {\r\n\t\tconst name = \"URL\";\r\n\t\tconst version = \"2.1.2\";\r\n\t\tconsole.log(`\\n🟧 ${name} v${version}\\n`);\r\n\t\turl = this.#parse(url, base);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t#parse(url, base = undefined) {\r\n\t\tconst URLRegex = /(?:(?<protocol>\\w+:)\\/\\/(?:(?<username>[^\\s:\"]+)(?::(?<password>[^\\s:\"]+))?@)?(?<host>[^\\s@/]+))?(?<pathname>\\/?[^\\s@?]+)?(?<search>\\?[^\\s?]+)?/\r\n\t\tconst PortRegex = /(?<hostname>.+):(?<port>\\d+)$/;\r\n\t\turl = url.match(URLRegex)?.groups || {};\r\n\t\tif (base) {\r\n\t\t\tbase = base?.match(URLRegex)?.groups || {};\r\n\t\t\tif (!base.protocol || !base.hostname) throw new Error(`🚨 ${name}, ${base} is not a valid URL`);\r\n\t\t};\r\n\t\tif (url.protocol || base?.protocol) this.protocol = url.protocol || base.protocol;\r\n\t\tif (url.username || base?.username) this.username = url.username || base.username;\r\n\t\tif (url.password || base?.password) this.password = url.password || base.password;\r\n\t\tif (url.host || base?.host) {\r\n\t\t\tthis.host = url.host || base.host;\r\n\t\t\tObject.freeze(this.host);\r\n\t\t\tthis.hostname = this.host.match(PortRegex)?.groups.hostname ?? this.host;\r\n\t\t\tthis.port = this.host.match(PortRegex)?.groups.port ?? \"\";\r\n\t\t};\r\n\t\tif (url.pathname || base?.pathname) {\r\n\t\t\tthis.pathname = url.pathname || base?.pathname;\r\n\t\t\tif (!this.pathname.startsWith(\"/\")) this.pathname = \"/\" + this.pathname;\r\n\t\t\tthis.paths = this.pathname.split(\"/\").filter(Boolean);\r\n\t\t\tObject.freeze(this.paths);\r\n\t\t\tif (this.paths) {\r\n\t\t\t\tconst fileName = this.paths[this.paths.length - 1];\r\n\t\t\t\tif (fileName?.includes(\".\")) {\r\n\t\t\t\t\tconst list = fileName.split(\".\");\r\n\t\t\t\t\tthis.format = list[list.length - 1];\r\n\t\t\t\t\tObject.freeze(this.format);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else this.pathname = \"\";\r\n\t\tif (url.search || base?.search) {\r\n\t\t\tthis.search = url.search || base.search;\r\n\t\t\tObject.freeze(this.search);\r\n\t\t\tif (this.search) this.searchParams = this.search.slice(1).split(\"&\").map((param) => param.split(\"=\"));\r\n\t\t};\r\n\t\tthis.searchParams = new Map(this.searchParams || []);\r\n\t\tthis.harf = this.toString();\r\n\t\tObject.freeze(this.harf);\r\n\t\treturn this;\r\n\t};\r\n\r\n\ttoString() {\r\n\t\tlet string = \"\";\r\n\t\tif (this.protocol) string += this.protocol + \"//\";\r\n\t\tif (this.username) string += this.username + (this.password ? \":\" + this.password : \"\") + \"@\";\r\n\t\tif (this.hostname) string += this.hostname;\r\n\t\tif (this.port) string += \":\" + this.port;\r\n\t\tif (this.pathname) string += this.pathname;\r\n\t\tif (this.searchParams.size !== 0) string += \"?\" + Array.from(this.searchParams).map(param => param.join(\"=\")).join(\"&\");\r\n\t\treturn string;\r\n\t};\r\n\r\n\ttoJSON() { return JSON.stringify({ ...this }) };\r\n}\r\n","import { $platform, log } from \"./utils.mjs\";\r\nexport default function logError(error) {\r\n    switch ($platform) {\r\n        case \"Surge\":\r\n        case \"Loon\":\r\n        case \"Stash\":\r\n        case \"Egern\":\r\n        case \"Shadowrocket\":\r\n        case \"Quantumult X\":\r\n        default:\r\n            log(\"\", `❗️执行错误!`, error, \"\");\r\n            break\r\n        case \"Node.js\":\r\n            log(\"\", `❗️执行错误!`, error.stack, \"\");\r\n            break\r\n    };\r\n};\r\n","import { $platform, _, log } from \"./utils.mjs\";\r\n\r\nexport default function done(object = {}) {\r\n    switch ($platform) {\r\n        case \"Surge\":\r\n            if (object.policy) _.set(object, \"headers.X-Surge-Policy\", object.policy);\r\n            log(\"\", `🚩 执行结束! 🕛 ${(new Date().getTime() / 1000 - $script.startTime)} 秒`, \"\");\r\n            $done(object);\r\n            break;\r\n        case \"Loon\":\r\n            if (object.policy) object.node = object.policy;\r\n            log(\"\", `🚩 执行结束! 🕛 ${(new Date() - $script.startTime) / 1000} 秒`, \"\");\r\n            $done(object);\r\n            break;\r\n        case \"Stash\":\r\n            if (object.policy) _.set(object, \"headers.X-Stash-Selected-Proxy\", encodeURI(object.policy));\r\n            log(\"\", `🚩 执行结束! 🕛 ${(new Date() - $script.startTime) / 1000} 秒`, \"\");\r\n            $done(object);\r\n            break;\r\n        case \"Egern\":\r\n            log(\"\", `🚩 执行结束!`, \"\");\r\n            $done(object);\r\n            break;\r\n        case \"Shadowrocket\":\r\n        default:\r\n            log(\"\", `🚩 执行结束!`, \"\");\r\n            $done(object);\r\n            break;\r\n        case \"Quantumult X\":\r\n            if (object.policy) _.set(object, \"opts.policy\", object.policy);\r\n            // 移除不可写字段\r\n            delete object[\"auto-redirect\"];\r\n            delete object[\"auto-cookie\"];\r\n            delete object[\"binary-mode\"];\r\n            delete object.charset;\r\n            delete object.host;\r\n            delete object.insecure;\r\n            delete object.method; // 1.4.x 不可写\r\n            delete object.opt; // $task.fetch() 参数, 不可写\r\n            delete object.path; // 可写, 但会与 url 冲突\r\n            delete object.policy;\r\n            delete object[\"policy-descriptor\"];\r\n            delete object.scheme;\r\n            delete object.sessionIndex;\r\n            delete object.statusCode;\r\n            delete object.timeout;\r\n            if (object.body instanceof ArrayBuffer) {\r\n                object.bodyBytes = object.body;\r\n                delete object.body;\r\n            } else if (ArrayBuffer.isView(object.body)) {\r\n                object.bodyBytes = object.body.buffer.slice(object.body.byteOffset, object.body.byteLength + object.body.byteOffset);\r\n                delete object.body;\r\n            } else if (object.body) delete object.bodyBytes;\r\n            log(\"\", `🚩 执行结束!`, \"\");\r\n            $done(object);\r\n            break;\r\n        case \"Node.js\":\r\n            log(\"\", `🚩 执行结束!`, \"\");\r\n            process.exit(1);\r\n            break;\r\n    }\r\n}\r\n"],"names":["$environment","module","$task","$loon","$rocket","Egern","Lodash","console","object","path","defaultValue","Array","result","previousValue","currentValue","Object","undefined","value","currentIndex","Boolean","string","map","m","keyName","String","keyValue","key","JSON","e","$persistentStore","$prefs","dataFile","require","curDirDataFilePath","rootDirDataFilePath","process","isCurDirDataFile","isRootDirDataFile","jsondata","request","option","method","parseInt","encodeURI","Promise","resolve","reject","$httpClient","error","response","body","ArrayBuffer","reason","iconv","initGotEnv","opts","url","nextOpts","ck","base","URLRegex","PortRegex","Error","fileName","list","param","Map"],"mappings":"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"}